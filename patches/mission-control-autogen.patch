From 85ed00be83c6928cc1d16f7a4d03b0c8a963017e Mon Sep 17 00:00:00 2001
From: Cosimo Cecchi <cosimoc@gnome.org>
Date: Thu, 15 Nov 2012 12:04:30 -0500
Subject: [PATCH] build: honor NOCONFIGURE in autogen.sh

Like telepathy-glib does already.

https://bugs.freedesktop.org/show_bug.cgi?id=57165
---
 autogen.sh | 25 +++++++++++++++----------
 1 file changed, 15 insertions(+), 10 deletions(-)

diff --git a/autogen.sh b/autogen.sh
index 8c0315c..5c3d084 100755
--- a/autogen.sh
+++ b/autogen.sh
@@ -20,16 +20,21 @@ fi
 echo 'Running autoreconf -i --force'
 autoreconf -i --force
 
-run_configure=true
-for arg in $*; do
-    case $arg in
-        --no-configure)
-            run_configure=false
-            ;;
-        *)
-            ;;
-    esac
-done
+# Honor NOCONFIGURE for compatibility with gnome-autogen.sh
+if test x"$NOCONFIGURE" = x; then
+    run_configure=true
+    for arg in $*; do
+        case $arg in
+            --no-configure)
+                run_configure=false
+                ;;
+            *)
+                ;;
+        esac
+    done
+else
+    run_configure=false
+fi
 
 default_args="--enable-gtk-doc --enable-mcd-plugins --enable-gnome-keyring=auto"
 
-- 
1.8.0

